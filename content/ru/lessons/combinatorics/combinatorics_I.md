---
title: "Комбинаторика"
date: 2025-02-10
---
# Часть I.

Что такое комбинаторика? Это раздел математики, изучающий способы выбора, упорядочивания и подсчёта различных конфигураций элементов. Что можно считать "элементами"? Это могут быть как физические объекты, так и абстрактные математические сущности, например, числа, множества или графы.

Тут разберём основные принципы комбинаторики: принципы сложения, умножения, а также понятие **перестановок**, **сочетаний**, **размещений**

#### Принцип сложения:

У нас есть 100 монет (подставьте название валюты какое угодно) чтобы купить поесть.
Придя в магазин у нас "есть выбор": онигири за 99 монет, бургер за 100 монет, а также газировка за 70 монет, кофе за 100 монет, мороженное за 65 монет.

Сколько способов купить что-то из доступного?

Ну из 5 позиций мы можем выбрать **что-то одно** $\implies$ всего 5 способов

🔹Формально: сложение в комбинаторике означает что мы складываем все возможные **независящие** способы и получаем общее количество возможных способов.


#### Принцип умножения:

Собираясь утром на занятия, у нас есть выбор как одеться сегодня:

Верх: чёрная рубашка ($A$), черное худи ($B$), серая футболка ($C$)
Низ: чёрные джинсы ($D$), тёмно-синие брюки ($E$)

Составим таблицу возможных вариантов аутфита:

| Верх | Низ |                                    |
| ---- | --- | ---------------------------------- |
| $A$  | $D$ | Черная рубашка и черные джинсы     |
| $A$  | $E$ | Черная рубашка и темно-синие брюки |
| $B$  | $D$ | Черное худи и черные джинсы        |
| $B$  | $E$ | Черное худи и тёмно-синие брюки    |
| $C$  | $D$ | Серая футболка и черные джинсы     |
| $C$  | $E$ | Серая футболка и тёмно-синие брюки |

Как видно из таблицы у нас получилось 6 комбинаций. В чём смысл? Мы не можем выйти из дома, не одев штаны или с голым торсом (ну, полагаю что не можем). Тем не менее мы можем всячески сочетать наши вещи чтобы внести хоть какое-то разнообразие в повседневную жизнь... А ещё, когда мы одеваем штаны и кофту, нам **не важно** что мы оденем сначала, а что потом. К чему это замечание? Дальше мы увидим что в некоторых ситуациях **порядок** элементов играет исключительную роль.

🔹Формально: если первый выбор можно сделать $m$ способами, а второй сделать $n$ способами, то общее число вариантов:    $n\cdot m$

---

## Перестановки, Размещения и Сочетания  

Теперь разберёмся с основными способами **выбора и упорядочивания элементов**.  

### Перестановки 

У нас есть $n$ различных элементов, и мы хотим их упорядочить.  

**Сколько существует способов это сделать?**  

Допустим, у нас есть **3 книги** ($A$, $B$, $C$), и мы хотим расставить их на полке в разном порядке.  

Первую книгу можно выбрать **3 способами**, вторую — **2 способами**, третья окажется на своём месте автоматически.  

Общее число способов расположить 3 книги:  $P(3) = 3! = 3 \cdot 2 \cdot 1 = 6$
  

**Общий случай:**  

Если у нас $n$ элементов, то количество **перестановок** всех элементов равно:  
$$
P(n) = n!
				$$  *Примечание*: тут используется обозначение "$n!$" — знак "!" после числа означает что мы вычисляем **факториал** числа $n$. Будем считать что факториал это умножение всех чисел от 1 до $n$   ($1\cdot 2 \cdot 3 \cdot 4 \cdot ~ \dots ~ \cdot n$)


🔹 **Пример:** Сколькими способами можно расставить 5 разных книг на полке?  
$$
P(5) = 5! = 5 \cdot 4 \cdot 3 \cdot 2 \cdot 1 = 120
$$


---

### Сочетания

Теперь разберём случай, когда нам **не важен порядок**.  

Например, у нас есть **10 студентов**, и мы хотим выбрать **3-х**, чтобы отправить их на олимпиаду (или на пересдачу).  

Выбор **А, B, C** и **C, A, B** — это **один и тот же выбор**, ведь порядок не играет роли.  

Формула **сочетаний** $C(n, k)$:  
$$
C(n, k) = \frac{n!}{k!(n-k)!}
$$  

🔹 **Пример:** Сколькими способами можно выбрать 3 студентов из 10?  
$$
C(10,3) = \frac{10!}{3!(10-3)!} = \frac{10!}{3!7!} = \frac{10 \cdot 9 \cdot 8}{3 \cdot 2 \cdot 1} = 120
$$  

🔹 **Что здесь происходит?**  

Сначала считаем **размещения** ($A(n, k)$), но в них **учтены все перестановки**.  
Чтобы избавиться от избыточного учёта **порядка**, делим на $k!$ (число способов переставить $k$ элементов).

---

### Сочетания с повторениями  
Если элементы **могут повторяться**, используется сочетание **с повторениями**:  
$$
\widetilde{C}(n, k) = ~C(n+k-1,~k)~=\frac{(n+k-1)!}{k!(n-1)!}
$$  

🔹 **Пример:** У нас есть 5 видов цветов, и мы хотим выбрать 3 букета (цветы могут повторяться).  
$$
\widetilde{C}(5,3) = \frac{(5+3-1)!}{3!(5-1)!} = \frac{7!}{3!4!} = 35
$$  

---
### Размещения (= сочетания с учётом порядка)  

Теперь рассмотрим случай, когда у нас **есть больше объектов, чем мы выбираем**.  

Например, у нас есть **8 участников**, а нам нужно выбрать **3 призовых места** (первое, второе и третье).  

Порядок важен: если выбраны **А, B, C**, то это **не то же самое**, что **B, C, A**.  

Формула для **размещения** $A(n, k)$:  
$$
A(n, k) = \frac{n!}{(n-k)!}
$$  

🔹 **Пример:** Сколькими способами можно выбрать 3 победителей из 8 участников?  
$$
A(8,3) = \frac{8!}{(8-3)!} = \frac{8!}{5!} = 8 \cdot 7 \cdot 6 = 336
$$  

🔹 **Что здесь происходит?**  

Для первого места мы выбираем **из 8 участников**.  
Для второго — **из 7 оставшихся**.  
Для третьего — **из 6 оставшихся**.  

Поэтому мы получаем **умножение трёх чисел**, что и даёт формулу **размещения**.

**Замечание:** Размещения — это то же самое, что **сочетания с учётом порядка**.  
Сначала мы выбираем **k элементов** (как в сочетаниях), а затем **упорядочиваем их** (как в перестановках):
$$
A(n, k) = C(n, k) \cdot k!
$$  

---

### Размещения с повторениями
Если можно **выбирать один и тот же элемент несколько раз**, то используется другая формула:
$$
\widetilde{A}(n, k) = n^k
$$  
🔹 **Пример:** У нас есть 10 видов мороженого, и мы хотим выбрать 4 порции (можно одинаковые вкусы).  
$$
\widetilde{A}(10,4) = 10^4 = 10000
$$  

---


## **Вывод**  

| Название                      | Формула                                           | Учитывает порядок? | Пример                      |
| ----------------------------- | ------------------------------------------------- | ------------------ | --------------------------- |
| **Перестановки**              | $P(n) = n!$                                       | ✅ Да               | Расставить 5 книг на полке  |
| **Размещения**                | $A(n, k) = \frac{n!}{(n-k)!}$                     | ✅ Да               | Выбрать 3 победителей из 8  |
| **Размещения с повторениями** | $\widetilde{A}(n, k) = n^k$                       | ✅ Да               | Выбрать 4 порции мороженого |
| **Сочетания**                 | $C(n, k) = \frac{n!}{k!(n-k)!}$                   | ❌ Нет              | Выбрать 3 студентов из 10   |
| **Сочетания с повторениями**  | $\widetilde{C}(n, k) = \frac{(n+k-1)!}{k!(n-1)!}$ | ❌ Нет              | Выбрать 3 букета цветов     |

---


## Некоторые примеры.

#### 1. Сколько способов существует расставить 5 *разных* шахматных фигур на доске?

Первое что нужно учесть: простая формула перестановок как в случае с книгами на полке тут не сработает.

Первую фигуру мы можем расставить 64 способами. Вторую расставляем 63 способами. Третью 62 способами...

Так это же **размещения**: 5 фигур, 64 клетки

$$
\boxed{A(64,5)~=\frac{~64!}{(64-5)!}~=\frac{~64!}{59!}~=~64\cdot63 \cdot 62 \cdot 61 \cdot 60}
$$

А что было бы, если бы фигуры были **одинаковые, не отличимые друг от друга**???

По сути, мы можем расставить наши **одинаковые фигуры** ровно таким же количеством способов, но тогда вопрос стоит такой: а нужно ли учитывать фактор перестановок? Все фигуры неотличимы, и если мы переставим любые из них между собой, то это будет ровно та же расстановка, ничего не изменилось. Перестановки одинаковых объектов  бессмысленны... Как бы сильно мы не старались, отчаянно переставляя одинаковые, сделанные по шаблону элементы, результат будет тот же. Мы можем лишь расставлять их на доске, но не менять их местами друг с другом... В итоге, количество способов расставить 5 одинаковых фигур на доске, это количество **размещений**, но **без** учёта перестановок.
Вспоминаем принцип умножения, но только в данном случае вместо умножения нам придётся делить:

$$
\boxed{C(64,5) ~=~ \frac{A(64,5)}{P(5)}~=\frac{~64!}{5!\cdot(64-5)!}}
$$
